
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../portfolio/">
      
      
      <link rel="icon" href="../assets/me.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>üìñ Manual - Dr Vladislav Li</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#manual" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Dr Vladislav Li" class="md-header__button md-logo" aria-label="Dr Vladislav Li" data-md-component="logo">
      
  <img src="../assets/me.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dr Vladislav Li
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              üìñ Manual
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Dr Vladislav Li" class="md-nav__button md-logo" aria-label="Dr Vladislav Li" data-md-component="logo">
      
  <img src="../assets/me.ico" alt="logo">

    </a>
    Dr Vladislav Li
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üìÑ Curriculum Vitae
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    üìñ Manual
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    üìñ Manual
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computer-science" class="md-nav__link">
    <span class="md-ellipsis">
      Computer Science
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computer-data-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Computer data storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#games-development" class="md-nav__link">
    <span class="md-ellipsis">
      Games Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artificial-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      Artificial Intelligence
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Operating Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operating Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#microsoft-operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Microsoft Operating Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Operating Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux Operating Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Ubuntu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ubuntu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu-standard-installation-routine" class="md-nav__link">
    <span class="md-ellipsis">
      Ubuntu Standard Installation Routine
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Xubuntu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customising-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Customising Arch Linux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple-operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Apple Operating Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software" class="md-nav__link">
    <span class="md-ellipsis">
      Software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-desktop" class="md-nav__link">
    <span class="md-ellipsis">
      Remote Desktop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualisation" class="md-nav__link">
    <span class="md-ellipsis">
      Virtualisation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-passthrough" class="md-nav__link">
    <span class="md-ellipsis">
      GPU Passthrough
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-passthrough-for-arch" class="md-nav__link">
    <span class="md-ellipsis">
      GPU Passthrough for Arch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-raid" class="md-nav__link">
    <span class="md-ellipsis">
      Software RAID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bios-raid" class="md-nav__link">
    <span class="md-ellipsis">
      BIOS RAID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vm-for-minio" class="md-nav__link">
    <span class="md-ellipsis">
      VM for MinIO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix A
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apendix-b" class="md-nav__link">
    <span class="md-ellipsis">
      Apendix B
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apendix B">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-develop-the-hardcode-project" class="md-nav__link">
    <span class="md-ellipsis">
      How to develop the hardcode project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-resize-kvm-virtual-disk-size" class="md-nav__link">
    <span class="md-ellipsis">
      How to resize KVM virtual disk size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-set-default-text-editor" class="md-nav__link">
    <span class="md-ellipsis">
      How to set default text editor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-enable-tpm-on-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      How to enable TPM on KVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-customise-xorg-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to customise xorg on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-install-st-dmenu-and-dwm-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to install st, dmenu, and dwm on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-add-gaps-to-dwm-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to add gaps to dwm on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-install-surf-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to install surf on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-customise-st-dmenu-dwm-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to customise st, dmenu, dwm on Arch Linux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../portfolio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üñ•Ô∏è Portfolio
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computer-science" class="md-nav__link">
    <span class="md-ellipsis">
      Computer Science
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computer-data-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Computer data storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#games-development" class="md-nav__link">
    <span class="md-ellipsis">
      Games Development
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artificial-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      Artificial Intelligence
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Operating Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operating Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#microsoft-operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Microsoft Operating Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Operating Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux Operating Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Ubuntu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ubuntu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu-standard-installation-routine" class="md-nav__link">
    <span class="md-ellipsis">
      Ubuntu Standard Installation Routine
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Xubuntu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customising-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Customising Arch Linux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple-operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Apple Operating Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software" class="md-nav__link">
    <span class="md-ellipsis">
      Software
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Software">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-desktop" class="md-nav__link">
    <span class="md-ellipsis">
      Remote Desktop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtualisation" class="md-nav__link">
    <span class="md-ellipsis">
      Virtualisation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-passthrough" class="md-nav__link">
    <span class="md-ellipsis">
      GPU Passthrough
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-passthrough-for-arch" class="md-nav__link">
    <span class="md-ellipsis">
      GPU Passthrough for Arch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-raid" class="md-nav__link">
    <span class="md-ellipsis">
      Software RAID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bios-raid" class="md-nav__link">
    <span class="md-ellipsis">
      BIOS RAID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vm-for-minio" class="md-nav__link">
    <span class="md-ellipsis">
      VM for MinIO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix A
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apendix-b" class="md-nav__link">
    <span class="md-ellipsis">
      Apendix B
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apendix B">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-develop-the-hardcode-project" class="md-nav__link">
    <span class="md-ellipsis">
      How to develop the hardcode project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-resize-kvm-virtual-disk-size" class="md-nav__link">
    <span class="md-ellipsis">
      How to resize KVM virtual disk size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-set-default-text-editor" class="md-nav__link">
    <span class="md-ellipsis">
      How to set default text editor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-enable-tpm-on-kvm" class="md-nav__link">
    <span class="md-ellipsis">
      How to enable TPM on KVM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-customise-xorg-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to customise xorg on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-install-st-dmenu-and-dwm-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to install st, dmenu, and dwm on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-add-gaps-to-dwm-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to add gaps to dwm on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-install-surf-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to install surf on Arch Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-customise-st-dmenu-dwm-on-arch-linux" class="md-nav__link">
    <span class="md-ellipsis">
      How to customise st, dmenu, dwm on Arch Linux
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="manual">üìñ Manual</h1>
<h2 id="introduction">Introduction</h2>
<p align="center">
  <img src="https://c.tenor.com/IErQHBRt6GIAAAAM/leonardo-dicaprio.gif" />
</p>

<p>This is a repository that contains useful code snippets, including personal and internet code. I am trying to keep the repository somewhat structured, however, there is no single rigid structure by design, but rather a chaotic collection of things that I think might be interesting in the future. Enjoy figuring this out.</p>
<h3 id="computer-science">Computer Science</h3>
<p align="center">
  <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExaTVqeTR3dmk3MmkyN2RlZmNqZDY2MHp6ZWI2NzQ3NDRlcmZ6dHBhbyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/scZPhLqaVOM1qG4lT9/giphy.webp" />
</p>

<p>Computer science is the study of computers and computational systems, encompassing both theoretical foundations and practical applications. It involves the design and analysis of algorithms, data structures, software, and hardware to solve problems efficiently. Key areas include artificial intelligence, programming, data science, cybersecurity, and human-computer interaction. Computer science also explores how information is processed, stored, and communicated, along with the creation of innovative technologies that impact various fields such as medicine, engineering, and entertainment.</p>
<h3 id="computer-data-storage">Computer data storage</h3>
<p>Computer data storage is a technology consisting of computer components and recording media that are used to retain digital data. It is a core function and fundamental component of computers.</p>
<p>The central processing unit (CPU) of a computer is what manipulates data by performing computations. In practice, almost all computers use a storage hierarchy‚Ää which puts fast but expensive and small storage options close to the CPU and slower but less expensive and larger options further away. Generally, the fast technologies are referred to as "memory", while slower persistent technologies are referred to as "storage".</p>
<p>Even the first computer designs, Charles Babbage's Analytical Engine and Percy Ludgate's Analytical Machine, clearly distinguished between processing and memory (Babbage stored numbers as rotations of gears, while Ludgate stored numbers as displacements of rods in shuttles). This distinction was extended in the Von Neumann architecture, where the CPU consists of two main parts: The control unit and the arithmetic logic unit (ALU). The former controls the flow of data between the CPU and memory, while the latter performs arithmetic and logical operations on data.</p>
<h3 id="games-development">Games Development</h3>
<p align="center">
  <img src="https://media.tenor.com/qJ_zQG8v-jMAAAAM/soa-game-dev.gif" />
</p>

<p>Games development is the process of designing, creating, and programming interactive digital experiences, often referred to as video games. It involves a multidisciplinary approach, combining elements of storytelling, art, sound design, and programming to build engaging gameplay and immersive environments. Game development typically includes several stages, such as concept design, coding, asset creation, testing, and optimization for different platforms. Developers use game engines, tools, and technologies to bring concepts to life, catering to a wide range of platforms from consoles and PCs to mobile devices and virtual reality systems.</p>
<h3 id="artificial-intelligence">Artificial Intelligence</h3>
<p align="center">
  <img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExaTE4dDZ4OThhdWxseHJ5aHByNnFjcXdvaWhpaHlhNXl4NjJrb3VvZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xT9C25UNTwfZuk85WP/giphy.webp" />
</p>

<p>Artificial intelligence (AI) is a branch of computer science focused on creating systems and machines that can simulate human intelligence. It involves the development of algorithms and models that allow computers to perform tasks such as learning from data, recognizing patterns, making decisions, solving problems, and understanding natural language. AI encompasses various subfields, including machine learning, neural networks, robotics, and natural language processing. Its applications span industries like healthcare, finance, transportation, and entertainment, enabling innovations such as autonomous vehicles, recommendation systems, and intelligent virtual assistants.</p>
<h2 id="operating-systems">Operating Systems</h2>
<p align="center">
  <img src="https://media.tenor.com/sSYnkkUnFyIAAAAM/error-fail.gif" />
</p>

<p>An operating system (OS) is a fundamental software layer that manages computer hardware and software resources, providing a user interface and acting as a bridge between the user and the computer's hardware. It controls basic functions such as file management, memory allocation, task scheduling, and device management, allowing different programs and applications to run efficiently. Key components of an OS include the kernel, which handles core operations, and utilities that provide a user-friendly environment. Operating systems are essential for running devices such as computers, smartphones, and servers, with examples including Windows, macOS, Linux, and Android.</p>
<h3 id="microsoft-operating-systems">Microsoft Operating Systems</h3>
<hr />
<p align="center">
  <img src="https://media.tenor.com/CG3LSeaP8IcAAAAM/just-a-moment-loading.gif" />
</p>

<p>Microsoft Windows is a product line of proprietary graphical operating systems developed and marketed by Microsoft. It is grouped into families and sub-families that cater to particular sectors of the computing industry ‚Äì Windows (unqualified) for a consumer or corporate workstation, Windows Server for a server and Windows IoT for an embedded system. Defunct families include Windows 9x, Windows Mobile, Windows Phone, and Windows Embedded Compact.</p>
<hr />
<ol>
<li>
<p><strong>Windows 11</strong>
    After installation, the B650I AX would prompt with a GIGABYTE Control Center. My advice is to avoid it. The software is heavily under developed. Firstly, I started installing the driver for the chipset, <em>mb_driver_597_chipset_7.01.08.129</em>. Then, LAN driver, <em>mb_driver_654_w11_11.21.0903.2024</em>. Then, Audio driver, <em>mb_driver_612_realtekdch_6.0.9733.1</em>. Then, Video driver for APU, <em>mb_driver_2689_apu5_24.30.18.241224</em>. Then, Bluetooth driver, <em>mb_driver_675_realtek8852_1.1068.2401.1903</em>. Interestingly, it prompted me whether I should re-install it using compatibility settings which I actually did but only once.</p>
</li>
<li>
<p><strong>Windows 10</strong></p>
<p>Windows 10 is a major release of Microsoft's Windows NT operating system. It is the direct successor to Windows 8.1, which was released nearly two years earlier. It was released to manufacturing on July 15, 2015, and later to retail on July 29, 2015. Windows 10 was made available for download via MSDN and TechNet, as a free upgrade for retail copies of Windows 8 and Windows 8.1 users via the Microsoft Store, and to Windows 7 users via Windows Update. Windows 10 receives new builds on an ongoing basis, which are available at no additional cost to users, in addition to additional test builds of Windows 10, which are available to Windows Insiders. Devices in enterprise environments can receive these updates at a slower pace, or use long-term support milestones that only receive critical updates, such as security patches, over their ten-year lifespan of extended support. In June 2021, Microsoft announced that support for Windows 10 editions which are not in the Long-Term Servicing Channel (LTSC) will end on October 14, 2025.</p>
<ul>
<li>To display Russian characters instead of squares.<ol>
<li>Open Language settings.</li>
<li>Open Administrative language settings.</li>
<li>Open Language for non-Unicode programs.</li>
<li>Click on the "Change system locale..." button.</li>
<li>Under Current system locale, select Russian (Russia).<ol>
<li>Don't check "Beta: Use Unicode UTF-8 for worldwide language support".</li>
</ol>
</li>
<li>Restart the PC.</li>
</ol>
</li>
<li>List of common applications I need.<ul>
<li>7-zip</li>
<li>miniconda3 (more details <a href="https://github.com/couper64/hardcode.internal">here</a>)</li>
<li>FastStone Image Viewer</li>
<li>Git</li>
<li>KeePass</li>
<li>Substituted KeePass with <strong>KeePassX</strong> because it is more modern.</li>
<li>VLC</li>
<li>WSL (more details <a href="https://github.com/couper64/hardcode.internal">here</a>)</li>
<li>VirtualBox required Microsoft Redistributable 2019</li>
<li>Docker (more details <a href="https://github.com/couper64/hardcode.internal">here</a>)</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="linux-operating-systems">Linux Operating Systems</h3>
<hr />
<h4 id="ubuntu">Ubuntu</h4>
<p>From Wikipedia: Ubuntu (/ äÀàb äntuÀê/ (listen) uu-BUUN-too) is a Linux distribution based on Debian and composed mostly of free and open-source software. Ubuntu is officially released in three editions: Desktop, Server, and Core for Internet of things devices and robots. All of the editions can run on a computer alone, or in a virtual machine. Ubuntu is a popular operating system for cloud computing, with support for OpenStack.Ubuntu's default desktop changed back from the in-house Unity to GNOME after nearly 6.5 years in 2017 upon the release of version 17.10.</p>
<ol>
<li>
<p><strong>Ubuntu 20.04.1</strong></p>
<p>I was working with the 20.04.1 version. However, the Ubuntu Download page has updated their [*.iso] to the 20.04.5 version. Therefore, it is important to keep a copy of the installation file with the <strong>20.04.1</strong> version.</p>
<ol>
<li>The target <strong>kernel</strong> version is <em>5.15.0-x</em>, where x is a number of a patch.</li>
<li>The target <strong>NVIDIA driver</strong> version is <em>515.xx.yy</em>, where xx is a number of a minor version, and yy is a number of a patch.</li>
</ol>
</li>
<li>
<p><strong>Ubuntu 20.04.5</strong></p>
<p>The default installation file of Ubuntu 20.04 has been updated to 20.04.5. I decided to move to a new version and do an experiment. I will install the software and won't be updating the default packages. Luckily, the defualt kernel is <strong>5.14.0-1051-oem</strong> and NVIDIA driver is <strong>515.65.01</strong>.</p>
</li>
<li>
<p><strong>Ubuntu 24.04.1</strong></p>
<p>The <em>gdm3</em> display manager by default runs on Wayland. However, sometimes, e.g. <em>ast</em> driver, doesn't work with Wayland. To switch to Xorg uncomment <code>WaylandEnable=false</code> line by modifying <code>/etc/gdm3/custom.conf</code> configuration file. Save the file and reboot. This is the only working solution I have found so far.</p>
<p>I have tried many things, such as reinstalling by <strong>removing</strong> <em>gdm3</em>. I switched to <em>tty3</em>, using <code>Ctrl+Alt+F3</code> and stopped the display manager service, i.e. <em>gdm3</em>, using commands below. Stopping <em>gdm</em> and <em>display-manager.service</em> act as aliases and, in my opinion, it is better to stop the original service. I have tried both removing then rebooting, as well as, removing without rebooting. Also, I tried with and without stopping the <em>gdm3</em> service. Unfortunately, it didn't help.</p>
<pre><code>sudo systemctl stop gdm3
sudo apt remove gdm3
sudo apt install gdm3.
</code></pre>
<p>I have tried reinstalling by <strong>purging</strong> <em>gdm3</em>. I did the same experiments as with <strong>removing</strong>. Initially, when I tried to stop the service, purge it, and install it without rebooting the display manager started to work. Happily after, I logged into my user account and all seemed to be working. However, when I have rebooted, the problem came back.</p>
<pre><code>sudo systemctl stop gdm3
sudo apt purging gdm3
sudo apt install gdm3.
</code></pre>
</li>
</ol>
<h5 id="ubuntu-standard-installation-routine">Ubuntu Standard Installation Routine</h5>
<p>The standard installation involves the programs which are used regardless of 
a purpose of the installation, be it computer vision task or game development.
The programs listed in this section would be useful in any case.</p>
<p>The <strong>build-essential</strong> package installs programs like compiler, linker, 
libraries, and headers which are used during the compilation of various 
software. Many third-party software uses it implicitly and would produce 
errors otherwise. It is often comes pre-installed, for example Ubuntu
20.04.5 has is out-of-the-box.</p>
<pre><code>sudo apt install build-essential
</code></pre>
<p>The <strong>ubuntu-restricted-extras</strong> package installs programs which are not 
permitted in the installation ISO (Ubuntu) due to copyright issues. It installs
programs such as <em>ttf-mscorefonts-installer</em>, <em>libavcodec-extra</em>, 
<em>libavcodec-extra58</em>, <em>libmspack0</em>, <em>libvo-amrwbenc0</em>, <em>unrar</em>, <em>cabextract</em>,
<em>libaribb24-0</em></p>
<pre><code>sudo apt install ubuntu-restricted-extras
</code></pre>
<p>The <strong>gstreamer1.0-libav</strong>, <strong>gstreamer1.0-plugins-ugly</strong>, 
<strong>gstreamer1.0-vaapi</strong> packages install programs which are not permitted in the
installation ISO due to copyright issues. It is not different from the
<strong>ubuntu-restricted-extras</strong> package, however, the <strong>ubuntu-restricted-extras</strong>
package is available only on Ubuntu. In cases when I install different Linux,
I can use the following command.</p>
<pre><code>sudo apt install gstreamer1.0-libav \
                 gstreamer1.0-plugins-ugly \
                 gstreamer1.0-vaapi
</code></pre>
<p>The <strong>fonts-powerline</strong> package installs special fonts which are used to make 
BASH easier on eye, i.e. oh-my-bash.</p>
<pre><code>sudo apt install fonts-powerline
</code></pre>
<p>The <strong>p7zip-full</strong> package install a utility to archive &amp; unarchive files. I think that's important. Little reminder: <em>7z x "archive.zip"</em> <em>-ooutput/path</em> hasn't any space between <em>-o</em> and <em>output/path</em>.</p>
<pre><code>sudo apt install p7zip-full
</code></pre>
<p>The <strong>curl</strong> and <strong>wget</strong> packages install utilities to download files from remote computers via URLs. I believe, <strong>wget</strong> comes pre-installed to Ubuntu, but <strong>curl</strong> doesn't. I usually use both of them.</p>
<pre><code>sudo apt install curl wget
</code></pre>
<p>The <strong>ffmpeg</strong> package installs utility which allows me to manipulate media files like video MPEG-4, or audio MP3. But, I have found that the best option is to install <strong>ffmpeg</strong> inside a <strong>conda</strong> environment because it keeps the system-level environment clean.</p>
<pre><code>sudo apt install ffmpeg
</code></pre>
<p>The <strong>git</strong> package is the most common source code management tool out there in the wild. Although, there are other tools like Plastic SCM, Perforce, etc., to work with the rest of the team, we use <strong>git</strong>.</p>
<pre><code>sudo apt install git git-lfs
</code></pre>
<p>Sometimes, Git Large-File-Storage creates issues, I resolve them by using this command:</p>
<pre><code>git lfs install --skip-repo
</code></pre>
<hr />
<h4 id="xubuntu">Xubuntu</h4>
<p>Xubuntu (/z äÀàb äntuÀê/) is a Canonical-recognized, community-maintained derivative of the Ubuntu operating system. The name Xubuntu is a portmanteau of Xfce and Ubuntu, as it uses the Xfce desktop environment, instead of Ubuntu's customized GNOME desktop.</p>
<ol>
<li>
<p><strong>Xubuntu 20.04.1</strong></p>
<p>The development machines were installed with the 20.04.1 version, which is an Ubuntu-based operating system with the Xfce desktop environment instead of GNOME. However, it has many minor differences which in-turn slow down the development because the target machines are pre-installed with Ubuntu. As a result, I decided to withdraw Xubuntu and concentrate solely on Ubuntu.</p>
</li>
</ol>
<hr />
<h4 id="arch-linux">Arch Linux</h4>
<p>Arch Linux (/…ëÀêrt É/) is an independently developed x86-64 general-purpose Linux distribution that strives to provide the latest stable versions of most software by following a rolling-release model. The default installation is intentionally minimal so that users can add only the packages they require.</p>
<p>Once you created a bootable device and loaded the system. It will greet you with a shell as <code>root@archiso</code>. From there, the first step is to set the keyboard. For this, the official <a href="https://wiki.archlinux.org/title/Installation_guide#Set_the_console_keyboard_layout_and_font">Arch Linux Installation Guide</a> is pretty useful.</p>
<pre><code>localectl list-keymaps
loadkeys uk
</code></pre>
<p>To preview the fonts. The <code>--color=always</code> and <code>-R</code> parameters are to preserve the colour in the output.</p>
<pre><code>ls -lash --color=always /usr/share/kbd/consolefonts/ | less -R
</code></pre>
<p>Good choices for the UK version of Arch Linux are <code>ter-v32b</code>, <code>Uni2-Terminus16</code>, <code>Lat2-Terminus32x16</code>, and <code>Lat2-Terminus16</code>. The <code>ter-v20b</code> font is a smaller variant which seem to be a good fit for my monitor size. Noteworthy, these fonts won't be available in the installed system. Perhaps, because I am missing some crucial steps that copies the fonts over to the installed OS.</p>
<pre><code>setfont ter-v20b
</code></pre>
<p>Verify the boot mode. Either <code>64</code> or <code>32</code>. For me it was <code>64</code>. More details in the official guide <a href="https://wiki.archlinux.org/title/Installation_guide#Verify_the_boot_mode">here</a>.</p>
<pre><code>cat /sys/firmware/efi/fw_platform_size
</code></pre>
<p>Setup the internet. Start by checking if the network interface is up. Importantly, the <code>UP</code> bit is inside angular brackets. For me, it was very easy to mistake it with the <code>state DOWN</code>, especially when it is highlighted in red with the <code>--color</code> parameter.</p>
<pre><code>ip --color link
</code></pre>
<p>In my case, the device was using WiFi so I had to use <code>iwctl</code>.</p>
<pre><code>iwtcl
device list
station wlan0 scan
station wlan0 get-networks
station wlan connect [network_name]
exit
</code></pre>
<p>Check the internet connection.</p>
<pre><code>ping archlinux.org
</code></pre>
<p>Manually, sync the time and date.</p>
<pre><code>timedatectl
</code></pre>
<p>Figure out what storage devices we have and where they located.</p>
<pre><code>lsblk
</code></pre>
<p>For me, it listed <code>/dev/nvme0n1</code>.</p>
<pre><code>fdisk /dev/nvme0n1
</code></pre>
<p>Then, it is a somewhat interactive TUI, but it uses, imho, very cryptic way of operation. For instance, it uses a single letter <code>p</code> to list information about the current partitioning if any. I would rather type in an entire command but we've got what we've got. I create <code>EFI</code>, <code>swap</code>, and <code>Linux filesystem</code>. This bit is not documented in the official guide because it use case specific, luckily, there is <a href="https://gist.github.com/mjkstra/96ce7a5689d753e7a6bdd92cdc169bae#main-installation">this guide</a> which gives some hints.</p>
<pre><code>g # Create GPT.
ENTER
n # Create new partition.
ENTER
ENTER
ENTER
+512M
ENTER
t # Change type.
ENTER
ENTER
1 # To EFI.
ENTER
n # Create new partition.
ENTER
ENTER
ENTER
+32G
ENTER
t # Change type.
ENTER
ENTER
swap # To swap.
ENTER
n # Create new partition.
ENTER
ENTER
ENTER
ENTER
p # View the results so far.
ENTER
w # Write it.
ENTER
</code></pre>
<p>Formatting the partitions.</p>
<pre><code>mkfs.fat -F 32 /dev/nvme0n1p1
mkswap /dev/nvme0n1p2
mkfs.ext4 /dev/nvme0n1p3
</code></pre>
<p>Mount the file systems. I didn't pay much attention here, but the order is important. First, we mount the main file system, and, then, we mount the EFI system. Otherwise, it will overwrite itself.</p>
<pre><code>mount /dev/nvme0n1p3 /mnt
mount --mkdir /dev/nvme0n1p1 /mnt/boot
swapon /dev/nvme0n1p2
</code></pre>
<p>Install essential packages. This is the minimum to have a functional operating system. Without these packages the rest of the instructions wouldn't work.</p>
<div class="highlight"><pre><span></span><code>pacstrap<span class="w"> </span>-K<span class="w"> </span>/mnt<span class="w"> </span>base<span class="w"> </span>linux<span class="w"> </span>linux-firmware
</code></pre></div>
<p>Install some custom packages. This will install some packages to methaphorically "bootstrap" our system. Technically, these packages aren't needed to boot an operating system but I am not that hard core yet.</p>
<div class="highlight"><pre><span></span><code>pacstrap<span class="w"> </span>-K<span class="w"> </span>/mnt<span class="w"> </span>base-devel<span class="w"> </span>efibootmgr<span class="w"> </span>grub<span class="w"> </span>amd-ucode<span class="w"> </span>networkmanager<span class="w"> </span>pipewire<span class="w"> </span>pipewire-alsa<span class="w"> </span>pipewire-pulse<span class="w"> </span>pipewire-jack<span class="w"> </span>wireplumber<span class="w"> </span>openssh<span class="w"> </span>man<span class="w"> </span>git<span class="w"> </span>git-lfs<span class="w"> </span>alacritty<span class="w"> </span>xorg<span class="w"> </span>bluez<span class="w"> </span>bluez-utils<span class="w"> </span>neovim<span class="w"> </span>wget<span class="w"> </span>terminus-font<span class="w"> </span>nerd-fonts<span class="w"> </span>ttf-terminus-nerd<span class="w"> </span>noto-sans<span class="w"> </span>noto-fonts-cjk<span class="w"> </span>noto-fonts-emoji<span class="w"> </span>noto-fonts-extra<span class="w"> </span>ttf-font-awesome
</code></pre></div>
<ul>
<li><code>efibootmgr</code> needed to install grub</li>
<li><code>grub</code> the bootloader</li>
<li><code>amd-ucode</code> microcode updates for the cpu. If you have an intel one use "intel-ucode"</li>
<li><code>neovim</code> my go to editor, if unfamiliar use nano.</li>
<li><code>networkmanager</code> to manage Internet connections both wired and wireless (it also has an applet package network-manager-applet)</li>
<li><code>pipewire pipewire-alsa pipewire-pulse pipewire-jack</code> for the new audio framework replacing pulse and jack.</li>
<li><code>wireplumber</code> the pipewire session manager.</li>
<li><code>git git-lfs</code> to install the git vcs</li>
<li><code>openssh</code> to use ssh and manage keys</li>
<li><code>man</code> for manual pages</li>
<li><code>alacritty</code> is Rust terminal emulator which supposedly uses GPU acceleration.</li>
<li><code>xorg</code> to run GUI, e.g. <code>dwm</code>.</li>
</ul>
<p>List of dependencies that <code>base-devel</code> brings with itself. Based on this list, I updated the <code>pacstrap</code> above. I wanted to keep the basic <code>pacstrap</code> mentioned earlier as barebones as possible. To highlight that <code>base-devel</code> is optional, at least in theory, I put it in the next command of <code>pacstrap</code>.</p>
<ul>
<li>archlinux-keyring</li>
<li>autoconf</li>
<li>automake</li>
<li>binutils</li>
<li>bison</li>
<li>debugedit</li>
<li>fakeroot</li>
<li>file</li>
<li>findutils</li>
<li>flex</li>
<li>gawk</li>
<li>gcc</li>
<li>gettext</li>
<li>grep</li>
<li>groff</li>
<li>gzip</li>
<li>libtool</li>
<li>m4</li>
<li>make</li>
<li>pacman</li>
<li>patch</li>
<li>pkgconf</li>
<li>sed</li>
<li>sudo</li>
<li>texinfo</li>
<li>which</li>
</ul>
<p>Generate an fstab file.</p>
<pre><code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</code></pre>
<p>To validate.</p>
<pre><code>vim /mnt/etc/fstab
</code></pre>
<p>Change root into the new system.</p>
<pre><code>arch-chroot /mnt
</code></pre>
<p>Set the time zone.</p>
<pre><code>ln -sf /usr/share/zoneinfo/Europe/London /etc/localtime
</code></pre>
<p>Run hwclock(8) to generate /etc/adjtime.</p>
<pre><code>hwclock --systohc
</code></pre>
<p>Edit /etc/locale.gen and uncomment en_GB.UTF-8 UTF-8 and other needed UTF-8 locales. Generate the locales by running:</p>
<pre><code>locale-gen
</code></pre>
<p>Create the <code>/etc/locale.conf</code> file, and set the LANG variable accordingly:</p>
<pre><code>LANG=en_GB.UTF-8
</code></pre>
<p>If you set the console keyboard layout, make the changes persistent in /etc/vconsole.conf:</p>
<pre><code>KEYMAP=uk
</code></pre>
<p>Create the /etc/hostname file:</p>
<pre><code>bananasbravadas
</code></pre>
<p>Set the root password:</p>
<pre><code>passwd
</code></pre>
<p>Add user.</p>
<pre><code>useradd -mG wheel vlad
passwd vlad
</code></pre>
<p>Deploy grub.</p>
<pre><code>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
</code></pre>
<p>Generate the grub configuration ( it will include the microcode installed with pacstrap earlier )</p>
<pre><code>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
<p>Unmount everything and reboot</p>
<pre><code># Enable newtork manager before rebooting otherwise, you won't be able to connect
systemctl enable NetworkManager

# Exit from chroot
exit

# Unmount everything to check if the drive is busy
umount -R /mnt

# Reboot the system and unplug the installation media. I prefer to shutdown the PC, unplug the USB drive, and boot back.
shutdown -h now

# Now you'll be presented at the terminal. Log in with your user account, for me its "vlad".

# Enable and start the time synchronisation service
timedatectl set-ntp true

# Enable bluetooth service.
sudo systemctl enable bluetooth
sudo systemctl start bluetooth
</code></pre>
<p>Connect to WiFi after installation.</p>
<pre><code>nmcli device wifi list
nmcli device wifi connect &lt;SSID&gt; password &lt;your_wifi_password&gt;
nmcli connection show
</code></pre>
<p>Post installation advices are available <a href="https://wiki.archlinux.org/title/General_recommendations">here</a>.</p>
<p>Configure pacman and mirrors. All was okay for me, so I just skimmed it through and left it as is.</p>
<pre><code>sudo nvim /etc/pacman.d/mirrorlist
sudo nvim /etc/pacman.conf
</code></pre>
<ol>
<li>
<p><strong>Arch Linux 2024.01.01</strong></p>
<p>Planned to do a KVM/QEMU/libvirtio with GPU pass through for Windows and Ubuntu where I would apply Docker. Performed initial installation steps, able to setup a bootable OS.</p>
<ul>
<li>archlinux/var/lib/iwd/eduroam.8021x - a configuration for eduroam network using login and password. Required by iwctl.</li>
<li>archlinux/etc/iwd/main.conf - a configuration to let built-in DHCP daemon resolve an IP address for the host.</li>
<li>Install iwd and dhcpdc and systemctl enable iwd and systemctl enable dhcpdc to run the daemons on the system start up. These tools allow me to connect to a WiFi network.</li>
</ul>
<p>Useful links:
* Link to DWM installation on Arch Linux:
  * https://davidtsadler.com/posts/arch/2020-08-17/installing-st-dmenu-dwm-in-arch-linux/</p>
</li>
</ol>
<h4 id="customising-arch-linux">Customising Arch Linux</h4>
<hr />
<p>TBD</p>
<h3 id="apple-operating-systems">Apple Operating Systems</h3>
<hr />
<p>TBD</p>
<h2 id="software">Software</h2>
<h3 id="remote-desktop">Remote Desktop</h3>
<p>Remotely accessing desktops is a simple concept, but very cumbursome on practice. There are a lot of paid solutions such as AnyDesk, TeamViewer, ZeroTier, etc. However, ideally, we want a self-hosted solution, so that we could run it indefinitely without heavy reliance on third party developers. There we could consider open source solutions like RustDesk &amp; RustDesk Server software, xrdp, freerdp, etc. Futhermore, we can consider software such as Guacamole. Unfortunately, all of the software has thair strong and not so strong sides. In fact, practically, I find Google Chrome Remote Desktop to be the easiest software to deal with, although, personally, I am not a big fun of it. Historically, Google Chrome Remote Desktop was the easiest to install, and when I came to my work, everyone would understand it. For example, I could say: "Oh, just use Chrome Remote Desktop", and my colleagues would get it without any further explanation. Convenient, isn't it.</p>
<p>Anyhow, it is time to step forward, we are acquiring new equipment, and I am going to setup a complex system with ability to give remote access to our equipment on demand whenever and wherever I am situated. For this, I have continued my experiments with various remote-desktop-software, and, here, I will document some of my findings. Starting from RustDesk. First of all, I found that for self-hosting, we need to use a pair of programs, RustDesk as a client, and RustDesk Server as a server applications. I set the server application on an AWS EC2 instance, what was relatively easy. And, following guidelines I found on the internet, I shared the ID, Relay Server, and Key with the client app. It all seemed to be working on the first day, but, on the second day, it would fail to connect to the server on my Windows machine, but wouldn't fail on my Linux machine. Also, I had to use xrdp instead of built-in gnome remote desktop on Ubuntu 24.04 because it wouldn't work the way I want it to causing me black screens.</p>
<p align="center">
  <img src="https://media.tenor.com/GyDrUFcBvL4AAAAM/guacamole-dance.gif" />
</p>

<p>Eventually, I stumbled upon Guacamole, following guidelines on the internet, I installed it natively on the Ubuntu 24.04. Notably, Ubuntu 24.04 doesn't provide Tomcat 9 because they moved forward to Tomcat 10. However, Guacamole doesn't like Tomcat 10, but it has not problems with Tomcat 9. To solve this problem, I had to download files directly from the Tomcat website. Luckily, installation was straight forward. The reason I didn't go with the version 10 was because Guacamole didn't support that version at that time. Not sure how it is like now. Furtermore, marrying Guacamole version 1.5.5 with gnome remote desktop was impossible. Apparently, there is a bug related with that version of Guacamole. Again, to solve this problem, I had to clone the official mirror repository of Guacamole on GitHub. After this, it seemed to be working, fingers crossed...</p>
<p>To install Guacamole server-side service, start by installing dependencies:</p>
<pre><code>sudo apt install build-essential libcairo2-dev libjpeg-turbo8-dev \
    libpng-dev libtool-bin libossp-uuid-dev libvncserver-dev \
    freerdp2-dev libssh2-1-dev libtelnet-dev libwebsockets-dev \
    libpulse-dev libvorbis-dev libwebp-dev libssl-dev \
    libpango1.0-dev libswscale-dev libavcodec-dev libavutil-dev \
    libavformat-dev
</code></pre>
<p>Then, install server-side service.</p>
<pre><code>git clone https://github.com/apache/guacamole-server
cd guacamole-server
autoreconf -fi
sudo ./configure --with-init-dir=/etc/init.d --enable-allow-freerdp-snapshots
sudo make
sudo make install
</code></pre>
<p>After installation of the service, I continued to configuring the service.</p>
<pre><code>sudo ldconfig
sudo systemctl daemon-reload
sudo systemctl start guacd
sudo systemctl enable guacd
</code></pre>
<p>As a rule of thumb, I also checked the status of the service.</p>
<pre><code>sudo systemctl status guacd
</code></pre>
<p>This I just followed the guide as I had no problems with creating folders at this stage either.</p>
<pre><code>sudo mkdir -p /etc/guacamole/{extensions,lib}
</code></pre>
<p>From now on, I focused on Tomcat 9.</p>
<pre><code>sudo apt install openjdk-17-jdk
sudo useradd -m -U -d /opt/tomcat -s /bin/false tomcat
sudo wget https://downloads.apache.org/tomcat/tomcat-9/v9.0.96/bin/apache-tomcat-9.0.96.tar.gz -P /tmp
sudo tar -xvf /tmp/apache-tomcat-9.0.96.tar.gz -C /opt/tomcat
sudo chown -R tomcat:tomcat /opt/tomcat
</code></pre>
<p>Tomcat is installed, we proceed to configure it.</p>
<pre><code>cd /etc/systemd/system
sudo nvim tomcat.service
</code></pre>
<p>Once I created the file, I paste in the following configuration.</p>
<pre><code>[Unit]
Description=Tomcat Server
After=network.target

[Service]
Type=forking
User=tomcat
Group=tomcat
Environment="JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64"
WorkingDirectory=/opt/tomcat/apache-tomcat-9.0.96
ExecStart=/opt/tomcat/apache-tomcat-9.0.96/bin/startup.sh

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Restarting services to let it pick up the changes won't hurt at this stage.</p>
<pre><code>sudo systemctl daemon-reload
sudo systemctl start tomcat
sudo systemctl enable tomcat
</code></pre>
<p>At this point, if I access the service at port 8080, it should render a page saying all is working. Now, I can focus my attention on Guacamole Web App client.</p>
<pre><code>sudo wget https://downloads.apache.org/guacamole/1.5.5/binary/guacamole-1.5.5.war
sudo mv guacamole-1.5.5.war /opt/tomcat/apache-tomcat-9.0.96/webapps/guacamole.war
sudo systemctl restart tomcat guacd
</code></pre>
<p>This is a <strong><em>"production-ready"</em></strong> approach, so we use a database for user authentication instead of a simple XML-file as was documented in the official manual.</p>
<pre><code>sudo apt install mariadb-server -y
sudo mysql_secure_installation
</code></pre>
<p>As a note, I didn't use unix_sockets, but a regular password. The rest I left at default arguments. Next, the guide was suggesting to download an older version of a MySQL/J connector (v8.0.26), but I felt brave, and download the latest version 9.1.0. The download procedure was different for me for some reason. I had to manually download file from the website.</p>
<pre><code>sudo apt install ./mysql-connector-j_9.1.0-1ubuntu24.04_all.deb
sudo cp /usr/share/java/mysql-connector-j-9.1.0.jar /etc/guacamole/lib/
</code></pre>
<p>Next, I focused on the Apache Guacamole JDBC AUTH plugin.</p>
<pre><code>sudo wget https://downloads.apache.org/guacamole/1.5.5/binary/guacamole-auth-jdbc-1.5.5.tar.gz
sudo tar -xf guacamole-auth-jdbc-1.5.5.tar.gz
sudo mv guacamole-auth-jdbc-1.5.5/mysql/guacamole-auth-jdbc-mysql-1.5.5.jar /etc/guacamole/extensions/
</code></pre>
<p>Now, it is time to configure our database.</p>
<pre><code>sudo mysql -u root -p
</code></pre>
<p>These are the commands inside MariaDB.</p>
<pre><code>MariaDB [(none)]&gt; CREATE DATABASE guac_db;
MariaDB [(none)]&gt; CREATE USER 'guac_user'@'localhost' IDENTIFIED BY 'password';
MariaDB [(none)]&gt; GRANT SELECT,INSERT,UPDATE,DELETE ON guac_db.* TO 'guac_user'@'localhost';
MariaDB [(none)]&gt; FLUSH PRIVILEGES;
MariaDB [(none)]&gt; EXIT;
</code></pre>
<p>After, we want to apply a schema.</p>
<pre><code>cd guacamole-auth-jdbc-1.5.5/mysql/schema
cat *.sql | mysql -u root -p guac_db
</code></pre>
<p>Next, we should tell Guacamole how it should handle user data. We create a simple properties file.</p>
<pre><code>sudo nvim /etc/guacamole/guacamole.properties
</code></pre>
<p>And, populate it with the configuration below.</p>
<pre><code># MySQL properties
mysql-hostname: 127.0.0.1
mysql-port: 3306
mysql-database: guac_db
mysql-username: guac_user
mysql-password: password
</code></pre>
<p>Restart all relevant services.</p>
<pre><code>sudo systemctl restart tomcat guacd mysql
</code></pre>
<p>Now, the service should be accessible at port <code>8080/guacamole</code>, and default login and password should be <code>guacadmin</code>. At this point, it is strongly recommended to create a new admin user and password and delete the default credentials. To do this, from the <strong>guacadmin profile</strong> click on <strong>Settings</strong>. Under the <strong>Edit User</strong> section, enter your new username and password. Then, under the <strong>Permissions</strong> section check the all boxes. When you are done, click <strong>Save</strong>. Now log out from the default user and log in back to Apache Guacamole with your new user created. Then, navigate to the settings, and users tab, and <strong>delete the guacadmin user</strong>. That‚Äôs it, you are done. From there, you can securely access your servers and computers.</p>
<p>References:</p>
<ul>
<li><a href="https://medium.com/@anshumaansingh10jan/unlocking-remote-access-a-comprehensive-guide-to-installing-and-configuring-apache-guacamole-on-30a4fd227fcd">Guide to install Guacamole server program</a></li>
<li><a href="https://www.fosstechnix.com/how-to-install-tomcat-on-ubuntu-24-04-lts/">Guide to install Tomcat 9 on Ubuntu 24.04</a></li>
<li><a href="https://discourse.gnome.org/t/gnome-remote-desktop-rdp-problem-with-apache-guacamole/20703/4">Here I found how to build Guacamole from GitHub repository</a></li>
<li><a href="https://github.com/apache/guacamole-server">This is the mirror repository of Apache Guacamole on GitHub</a></li>
<li><a href="https://dev.mysql.com/downloads/connector/j/">The website where I download MySQL/J connector</a></li>
</ul>
<h3 id="virtualisation">Virtualisation</h3>
<p>When working with VirtualBox, to enable bridge network, it is a simple matter of changing networking adapter in the settings of the progam to bridge adapter with the real ethernet adapter selected below. However, VirtualBox doesn't let us do hardware passthrough or, at least, I didn't find a definite answer to this on the internet. Otherwise, VirtualBox is a very useful piece of software that I use from time to time to experiment with various OS and new software.</p>
<p>Moving to QEMU/KVM, to allow virtual machines to connect to outside world the host's network should be reconfigured. To install QEMU/KVM with Virtual Manager to the following:</p>
<pre><code>sudo apt install qemu-kvm libvirt-daemon libvirt-daemon-system bridge-utils virt-manager
</code></pre>
<p>Usually, on Ubuntu 24.04.1, user is already part of <code>libvirt</code>, so we just need to add the user to the <code>kvm</code> group.</p>
<pre><code>sudo adduser $USER kvm
</code></pre>
<p>Once the user is added to the groups, I would suggest rebooting. After reboot, we can check if the installation is correct by checking if there are any virtual machines on the system.</p>
<pre><code>sudo virsh list --all
</code></pre>
<p>Or, we can check status of the <code>libvirt</code> daemon.</p>
<pre><code>sudo systemctl status libvirtd
</code></pre>
<p>Then, we can create bridge interface. Although, the default <em>NAT</em> allows VMs to communicate with the host and each other. And, through port forwarding on the host, we can expose the VMs to the outside world.</p>
<pre><code>nmcli con show
nmcli con add ifname br0 type bridge con-name br0
nmcli con add type bridge-slave ifname eth0 master br0
nmcli con mod br0 bridge.stp no
nmcli con down eth0
nmcli con up br0
nmcli device show
sudo systemctl restart NetworkManager.service
</code></pre>
<p>Although, creating bridges seems to be the most logical approach, sometimes, we can't use them. Therefore, port forwarding seems to be a viable alternative. Here is how to forward ports from host physical interface to virtual interface where the guest VMs reside.</p>
<pre><code>iptables -t nat -I PREROUTING -p tcp -d HOST_IP --dport HOST_PORT -j DNAT --to-destination GUEST_IP:GUEST_PORT
iptables -I FORWARD -m state -d GUEST_IP/24 --state NEW,RELATED,ESTABLISHED -j ACCEPT
</code></pre>
<p>For now, I am using <code>iptables-persistent</code> to save/reload port forwarding rules between reboots.</p>
<pre><code>sudo apt install iptables-persistent
</code></pre>
<p>The location is saves the rules in is <code>/etc/iptables/rules.v4</code> and <code>/etc/iptables/rules.v6</code>. To save the rules and load them, I use the following commands. I had to wrap it around as a command for a bash because I need elevated privilages on both piping as well as saving commands.</p>
<pre><code>sudo bash -c "iptables-save &gt; /etc/iptables/rules.v4"
</code></pre>
<p>To setup static IP inside guest VM, we need to modify the <em>netplan</em> configuration file for the <em>NetworkManager</em> service.</p>
<pre><code>network:
    version: 2
    renderer: NetworkManager
    ethernets:
        INTERFACE_NAME:
            dhcp4: false
            addresses:
                - STATIC_IP/24
            routes:
                - to: default
                 via: HOST_IP
            nameservers:
                addresses: [HOST_IP]
</code></pre>
<p>For example, <code>INTERFACE_NAME=eth0</code>, <code>STATIC_IP=192.168.1.100</code>, <code>HOST_IP=192.168.1.1</code>. Save the aforementioned in the <code>/etc/netplan/01-network-manager-all.yaml</code> file. And, apply the plan.</p>
<pre><code>sudo chmod 700 /etc/netplan/01-network-manager-all.yaml
sudo netplan try
</code></pre>
<p>Then, we setup KVM to allow guest VMs to use bridge interface. Start from creating a file in an arbitrary location on the computer and name it <code>host-birdge.xml</code>.</p>
<pre><code>&lt;network&gt;
    &lt;name&gt;host-bridge&lt;/name&gt;
    &lt;forward mode="bridge"/&gt;
    &lt;bridge name="br0"/&gt;
&lt;/network&gt;
</code></pre>
<p>Then execute these commands (as a user in the libvirt group):</p>
<pre><code>virsh net-define host-bridge.xml
virsh net-start host-bridge
virsh net-autostart host-bridge
</code></pre>
<p>A mechanism to allow connections from outside.</p>
<pre><code>sudo modprobe br_netfilter
sudo echo "br_netfilter" &gt; /etc/modules-load.d/br_netfilter.conf
</code></pre>
<p>Create /etc/sysctl.d/10-bridge.conf.</p>
<pre><code># Do not filter packets crossing a bridge
net.bridge.bridge-nf-call-ip6tables=0
net.bridge.bridge-nf-call-iptables=0
net.bridge.bridge-nf-call-arptables=0
</code></pre>
<p>Apply and check the config.</p>
<pre><code>sudo sysctl -p /etc/sysctl.d/10-bridge.conf
sudo sysctl -a | grep "bridge-nf-call"
</code></pre>
<p>Configure the guest to use host-bridge. Open up the Virtual Machine Manager and then select the target guest. Go to the NIC device. The drop down for "Network Source" should now include a device called "Virtual netowrk 'host-bridge'". The "Bridge network device model" will be "virtio" if that's your KVM configuration's default. Select that "host-bridge" device.</p>
<p>Useful commands:</p>
<p>A command to set automatic start of VMs when host boots up.</p>
<pre><code>virsh autostart &lt;vm-name&gt;
</code></pre>
<p>A command to undo automatic start of VMs when host boots up.</p>
<pre><code>virsh autostart --disable &lt;vm-name&gt;
</code></pre>
<p>A command to set automatic start of the Docker containers when host boots up.</p>
<pre><code>docker update --restart unless-stopped &lt;container-name&gt;
</code></pre>
<p>A command to undo automatic start of the Docker containers when host boots up.</p>
<pre><code>docker update --restart no &lt;container_name_or_id&gt;
</code></pre>
<p>Alternative to <code>iptables</code> could be <code>nginx</code></p>
<p>It is possible to configure <code>nginx</code> as a reverse proxy server on a host machine. That way, all traffic could be forwarded to an appropriate guest machine. Furthermore, using OpenResty with Lua, it is possible to configure it to pull forwarding rules from a database like MySQL, PostgreSQL, etc. Building on top, a FastAPI server would update the rules via a simple REST API endpoint. At the end, a user-oriented web application could be developed using Rest.js, Vue.js, or AngularJS. That would constitute a fully automated user-friendly system for host-guest VM management.</p>
<p>References:
* <a href="https://gist.github.com/plembo/f7abd2d9b6f76e7afdece02dae7e5097">Guide to add a bridge interface to the Ubuntu desktop using <em>nmcli</em></a>
* <a href="https://gist.github.com/frjaraur/7bad30cedc484486efd3ba5d12362bec">Another guide to add a bridge interface that helped to understand how to set dynamic IP instead of static</a>
* <a href="https://gist.github.com/plembo/a7b69f92953a76ab2d06533754b5e2bb">Guide to setup a bridged network for KVM guests</a>
* <a href="https://www.dzombak.com/blog/2024/02/Setting-up-KVM-virtual-machines-using-a-bridged-network.html">Another useful guide, this is where I started my research from</a>
* <a href="https://absprog.com/post/qemu-kvm-ubuntu-24-04">1/3 of QEMU/KVM Ubuntu 24.04 installation instructions I used</a>
* <a href="https://www.server-world.info/en/note?os=Ubuntu_24.04&amp;p=kvm&amp;f=1">2/3 of QEMU/KVM Ubuntu 24.04 installation instructions I used</a>
* <a href="https://phoenixnap.com/kb/ubuntu-install-kvm">3/3 of QEMU/KVM Ubuntu 24.04 installation instructions I used</a>
* <a href="https://askubuntu.com/questions/720207/port-forwarding-between-bridged-interfaces">1/3 of port forwarding instructions I used</a>
* <a href="https://ubuntuforums.org/showthread.php?t=2261173&amp;p=13210545#post13210545">2/3 of port forwarding instructions I used</a>
* <a href="https://serverfault.com/questions/913246/forward-traffic-from-port-22-to-virtual-computer-on-ubuntu">3/3 of port forwarding instructions I used</a>
* <a href="https://www.freecodecamp.org/news/setting-a-static-ip-in-ubuntu-linux-ip-address-tutorial/">1/2 of setting static IP using netplan and NetworkManager</a>
* <a href="https://linuxconfig.org/setting-a-static-ip-address-in-ubuntu-24-04-via-the-command-line">2/2 of setting static IP using netplan and NetworkManager</a></p>
<h3 id="gpu-passthrough">GPU Passthrough</h3>
<p>I decided to make it into a separate section because this task is complex enough on its own.</p>
<p>The following command can tell what kernel driver is in use.</p>
<pre><code>lspci | grep ' VGA ' | cut -d" " -f 1 | xargs -i lspci -v -s {}
</code></pre>
<p>The output should look something like this.</p>
<pre><code>bd:00.0 VGA compatible controller: NVIDIA Corporation GA102GL [RTX A6000] (rev a1) (prog-if 00 [VGA controller])
    Subsystem: NVIDIA Corporation GA102GL [RTX A6000]
    Physical Slot: 7
    Flags: bus master, fast devsel, latency 0, IRQ 439, NUMA node 1, IOMMU group 30
    Memory at e9000000 (32-bit, non-prefetchable) [size=16M]
    Memory at 22bfe0000000 (64-bit, prefetchable) [size=256M]
    Memory at 22bff0000000 (64-bit, prefetchable) [size=32M]
    I/O ports at d000 [size=128]
    Expansion ROM at ea000000 [virtual] [disabled] [size=512K]
    Capabilities: &lt;access denied&gt;
    Kernel driver in use: nvidia
    Kernel modules: nvidiafb, nouveau, nvidia_drm, nvidia
</code></pre>
<p>For a successful GPU passthrough, I installed Ubuntu 24.04.1 without NVIDIA drivers using only <em>nouveau</em>.</p>
<p>Modify <em>grub</em>.</p>
<pre><code>sudo nvim /etc/default/grub
</code></pre>
<p>Make it look like this.</p>
<pre><code>GRUB_CMDLINE_LINUX_DEFAULT="quiet splash intel_iommu=on iommu=pt"
</code></pre>
<p>Save the changes, and update grub to apply the changes. Following with a reboot.</p>
<pre><code>sudo update-grub
</code></pre>
<p>Blacklist the GPUs by creating a configuration file.</p>
<pre><code>sudo nvim /etc/modprobe.d/gpu-passthrough-blacklist.conf
</code></pre>
<p>Make it look like this.</p>
<pre><code>blacklist nouveau
blacklist snd_hda_intel
</code></pre>
<p>Bind GPUs to VFIO by creating another configuration file.</p>
<pre><code>sudo nvim /etc/modprobe.d/vfio.conf
</code></pre>
<p>Make it look like this.</p>
<pre><code>options vfio-pci ids=XXXX:XXXX,YYYY:YYYY
</code></pre>
<p><code>XXXX:XXXX,YYYY:YYYY</code> are model ids found by using the <code>lspci -nnk | grep -e NVIDIA</code> command. The ids are located at the end of the line. Shortly after, save and apply the changes.</p>
<pre><code>sudo update-initramfs -u
</code></pre>
<p>Example</p>
<p>Installing Ubuntu 24.04.1 from a USB flash drive. A standard procedure, however, on the step where it asks to isntall third-party drivers, we leave the checkbox empty. The "Download and install support for additional media formats" was greyed out because the machine didn't have access to the internet. The goal is to ensure that the GPUs wouldn't be used by the host system but rather on-demand by guest VMs.</p>
<p>The system has failed to boot on the first try. Rebooted, but the screen was black. Switched to tty3 and enabled Xorg suppport in the <code>gdm3</code> configuration file. Rebooted and logged in. The welcome page has been through, and connection to the internet was done via Wi-Fi.</p>
<p>Given the access to the WWW, the system was updated and upgraded. Notebly, the connection was very slow, i.e. it took around 30 minutes to complete the task. It prompted me to restart, we went with "Restart later" and then manually restarted. Enabled RDP and SSH.</p>
<p>Followed instructions to perform <a href="#section-12-linux-operating-systems">initial configuration</a>. Skipped <code>build-essential</code>, <code>ubuntu-restricted-extras</code>, <code>ffmpeg</code>, <code>fonts-powerline</code>, <code>gstreamer</code>, and <code>wget</code>. Proceeded with <a href="#section-22-virtualisation">the Virtualisation instructions</a>. It is very important to skip the <code>sudo apt upgrade</code> because it changes some of the packages that make <em>gdm3</em> fail to start when blacklisting <em>nouveau</em>! That was a big issue and it took me two days to narrow it down to this point. As it wasn't neccessary to upgrade, I left it at this stage.</p>
<pre><code>gpu0/gpuall SSH will be available at 192.168.122.100:221.
            RDP will be available at 192.168.122.100:33891.

gpu1/gpuduo1 SSH will be available at 192.168.122.101:221.
             RDP will be available at 192.168.122.101:33891.

gpu2/gputrio SSH will be available at 192.168.122.102:221.
             RDP will be available at 192.168.122.102:33891.

gpu3/gpuduo2 SSH will be available at 192.168.122.103:221.
             RDP will be available at 192.168.122.103:33891.

fileserver SSH will be available at 192.168.122.104:221.
           RDP will be available at 192.168.122.104:33891.
           MinIO will be available at 192.168.122.104:9000.
           MinIO Dashboard will be available at 192.168.122.104:9001.
</code></pre>
<p>References:
* <a href="https://github.com/bryansteiner/gpu-passthrough-tutorial">A guide to setup GPU passthrough</a>
* <a href="https://github.com/aaronanderson/LinuxVMWindowsSteamVR">A guide to setup GPU passthrough</a>
* <a href="https://github.com/cosminmocan/vfio-single-amdgpu-passthrough">A guide to setup GPU passthrough</a>
* <a href="https://askubuntu.com/questions/5417/how-to-get-the-gpu-info">How to lspci to check GPU kernel driver in use</a>
* <a href="https://askubuntu.com/questions/1523096/single-gpu-passthrough-on-24-04-nothing-happens-when-starting-vm">The comment in this link was intriguing</a>
* <a href="https://gitlab.com/risingprismtv/single-gpu-passthrough/-/wikis/home">1/2 of the guide the comment was referring to</a>
* <a href="https://github.com/ilayna/Single-GPU-passthrough-amd-nvidia?tab=readme-ov-file">2/2 of the guide the comment was referring to</a></p>
<h3 id="gpu-passthrough-for-arch">GPU Passthrough for Arch</h3>
<p>A simple Bash script that will give you all the valuable IOMMU information, e.g. <code>10de:2882</code> or <code>10de:22be</code>. The script is available at <code>project/dotfiles/.local/bin/iommu</code> and I usually install it at <code>~/.local/bin/iommu</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">#!/bin/bash</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span>d<span class="w"> </span><span class="k">in</span><span class="w"> </span>/sys/kernel/iommu_groups/*/devices/*<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nv">n</span><span class="o">=</span><span class="si">${</span><span class="nv">d</span><span class="p">#*/iommu_groups/*</span><span class="si">}</span><span class="p">;</span><span class="w"> </span><span class="nv">n</span><span class="o">=</span><span class="si">${</span><span class="nv">n</span><span class="p">%%/*</span><span class="si">}</span>
<span class="w">        </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;IOMMU Group %s &#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$n</span><span class="s2">&quot;</span>
<span class="w">        </span>lspci<span class="w"> </span>-nns<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">d</span><span class="p">##*/</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>
<p>The guide [<a href="https://dividebyzer0.gitlab.io/GPUpassthrough.html#what-you-need">1</a>, <a href="https://qqq.ninja/blog/post/vfio-on-arch/#pre-requisites">2</a>, <a href="https://askubuntu.com/questions/1036297/cant-start-kvm-guest-network-default-is-not-active">3</a>] has mentioned ACS kernel patch, which allows the system to split the hardware devices into separate IOMMU groups. What in turn should provide higher granularity over the devices we want to pass through. I skipped this step.</p>
<p>Modifed <code>/etc/default/grub</code> by adding the following to <code>GRUB_CMDLINE_LINUX_DEFAULT</code>.</p>
<pre><code>amd_iommu=on iommu=pt pci.ids=10de:21c4,10de:1aeb
</code></pre>
<p>Once you've got all these options set, go ahead commit the changes. And, reboot.</p>
<pre><code>sudo grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
<p>After reboot, the output of <code>dmesg | grep vfio</code> indicated that the <code>vfio</code> module wasn't loaded during the boot. Logically, the selected PCI devices weren't used by <code>vfio</code> drivers. To circum nagivate this behaviour, I had to modify <code>/etc/mkinitcpio.conf</code> file.</p>
<pre><code>MODULES=(vfio_pci vfio vfio_iommu_type1 vfio_virqfd)
</code></pre>
<p>I saved the file, and ran the following.</p>
<pre><code>mkinitcpio -p linux
</code></pre>
<p>The following command installed the required software to create a VM.</p>
<pre><code>pacman -Sy --noconfirm qemu libvirt virt-manager edk2-ovmf dnsmasq dmidecode
</code></pre>
<h3 id="software-raid">Software RAID</h3>
<p>From the internet search, the suggested tool is <code>mdadm</code>.</p>
<p>To install <code>mdadm</code>, run the following command in terminal.</p>
<pre><code>sudo apt install mdadm
</code></pre>
<p>The following command will create the RAID 5 array.</p>
<pre><code>sudo mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda /dev/sdb /dev/sdc
</code></pre>
<p>Format the RAID array and make it persistent.</p>
<pre><code>clear; sudo mkdir -p /mnt/md0
sudo mount /dev/md0 /mnt/md0/
df -h -x devtmpfs -x tmpfs
</code></pre>
<p>Then, inside the host machine, we can setup something like this.</p>
<pre><code>sudo mdadm --detail --scan | sudo tee -a /etc/mdadm/mdadm.conf
sudo update-initramfs -u
sudo echo '/dev/md0 /box ext4 defaults,nofail,discard 0 0' | sudo tee -a /etc/fstab
</code></pre>
<p>References:
* <a href="https://medium.com/@jing.kang99/create-raid-5-arrays-with-mdadm-on-ubuntu-22-04-fbb08898e01c">The 1/2 guide</a>
* <a href="https://ioflood.com/blog/install-mdadm-command-linux/">The 2/2 guide</a></p>
<h3 id="bios-raid">BIOS RAID</h3>
<p>Set the SATA from <code>AHCI</code> to <code>RAID</code>.</p>
<p>Created volume under <code>Advanced/Intel(R) VROC sSATA Controller/Create RAID Volume</code>.</p>
<p>Unfortunately, my configuration doesn't support <code>Intel(R) VROC sSATA Controller</code>. I will have to use software RAID.</p>
<pre><code>CPU: Intel(R) Xeon(R) Silver 4410Y
Generation: 4th "Sapphire Rapids"
Chipset: Intel¬Æ C621A Chipset
</code></pre>
<p>References:
* <a href="https://www.intel.com/content/www/us/en/support/articles/000099710/memory-and-storage/datacenter-storage-solutions.html">Intel¬Æ Virtual RAID on CPU (Intel¬Æ VROC) Operating Systems Support List</a>
* <a href="https://cdrdv2-public.intel.com/841093/intel-vroc-linux-releasenotes.pdf">Release Notes Intel¬Æ Virtual RAID on CPU (Intel¬Æ VROC) for Linux*</a>
* <a href="https://www.intel.com/content/www/us/en/products/sku/232376/intel-xeon-silver-4410y-processor-30m-cache-2-00-ghz/specifications.html">Intel¬Æ Xeon¬Æ Silver 4410Y Processor</a>
* <a href="https://www.intel.com/content/www/us/en/download/733029/intel-virtual-raid-on-cpu-intel-vroc-linux-driver-for-intel-server-boards-and-systems-based-on-intel-621a-chipset.html">Intel¬Æ Virtual RAID on CPU (Intel¬Æ VROC) Linux* Driver for Intel¬Æ Server Boards and Systems Based on Intel¬Æ 621A Chipset</a>
* <a href="https://www.supermicro.com/en/products/system/gpu/4u/sys-740gp-tnrt">GPU SuperServer SYS-740GP-TNRT</a></p>
<h3 id="vm-for-minio">VM for MinIO</h3>
<p>To setup a file storage server for research work, we will setup MinIO on Ubuntu 24.04. For this, we will run a VM using KVM/QEMU. We already set up RAID 5 on the host machine and, simply, created virtual disk using entire available space.</p>
<p>Waiting for Ubuntu to install inside VM...</p>
<p>Used <code>parted</code> command line tool to partition and format the hard drive.</p>
<p>Modified <code>fstab</code> to add automount option. And, used UUID instead of a path because it is more reliable.</p>
<p>Below are commands to run a Docker container of MinIO.</p>
<pre><code>mkdir -p ${HOME}/minio/data

docker run \
-p 9000:9000 \
-p 9001:9001 \
--user $(id -u):$(id -g) \
--name minio1 \
-e "MINIO_ROOT_USER=ROOTUSER" \
-e "MINIO_ROOT_PASSWORD=CHANGEME123" \
-v ${HOME}/minio/data:/data \
quay.io/minio/minio server /data --console-address ":9001"
</code></pre>
<p>References:
* <a href="https://help.ubuntu.com/community/InstallingANewHardDrive">The tutorial I used to setup virtual disk in guest OS.</a></p>
<h2 id="appendix-a">Appendix A</h2>
<p>To hide the unmounted volumes, the setting is located at <code>Settings/Ubuntu Desktop/Dock/Configure Dock Behavior/Include Unmounted Volumes</code>.</p>
<p>Command to recursively delete files.</p>
<pre><code>find . -type f -name '*.o' -exec rm {} +
</code></pre>
<p>Command to recusrively clone a repository.</p>
<pre><code>git clone --recurse-submodules git://github.com/foo/bar.git
</code></pre>
<p>Command to kill Ngrok process.</p>
<pre><code>kill -9 "$(pgrep ngrok)"
</code></pre>
<p>Commands to run Ngrok in the background.</p>
<pre><code>clear ; ngrok http http://localhost:8080 &gt; /dev/null &amp;
clear ; export WEBHOOK_URL="$(curl http://localhost:4040/api/tunnels | jq ".tunnels[0].public_url")"
clear ; echo $WEBHOOK_URL
</code></pre>
<p>Commands to install and setup Ngrok. First, sign up (in) and retrieve the authorisation token.</p>
<pre><code>snap install ngrok
ngrok config add-authtoken &lt;token&gt;
</code></pre>
<p>Another installation command, because when I installed <strong>ngrok</strong> through <strong>snap</strong>, it couldn't start a service, but when installed through <strong>apt</strong>, it worked.</p>
<pre><code>curl -s https://ngrok-agent.s3.amazonaws.com/ngrok.asc | \
  sudo gpg --dearmor -o /etc/apt/keyrings/ngrok.gpg &amp;&amp; \
  echo "deb [signed-by=/etc/apt/keyrings/ngrok.gpg] https://ngrok-agent.s3.amazonaws.com buster main" | \
  sudo tee /etc/apt/sources.list.d/ngrok.list &amp;&amp; \
  sudo apt update &amp;&amp; sudo apt install ngrok
sudo ngrok service install --config /path/to/config.yml
sudo ngrok service start
</code></pre>
<p>Although, all the messages were indicating "ok", it didn't work for me. Here is the config file.</p>
<pre><code>authtoken: &lt;your-auth-token&gt;
tunnels:
    default:
        proto: http
        addr: 8080
</code></pre>
<h2 id="apendix-b">Apendix B</h2>
<h3 id="how-to-develop-the-hardcode-project">How to develop the hardcode project</h3>
<pre><code>git clone git@github.com:couper64/hardcode.git
cd hardcode
</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">If the <code>hardcode</code> environment <strong>doesn't</strong> exist.</label><label for="__tabbed_1_2">If the <code>hardcode</code> environment <strong>does</strong> exist.</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>conda create -yn hardcode python=3
conda activate hardcode
pip install -r requirements.txt</p>
</div>
<div class="tabbed-block">
<p>conda activate hardcode</p>
</div>
</div>
</div>
<p>Finally, after the environment is set and Python packages are installed for the local development. To run the <code>public</code> documentation.</p>
<pre><code>mkdocs serve -f public/mkdocs.yml
</code></pre>
<p>And, to run the <code>private</code> documentation.</p>
<pre><code>mkdocs serve -f private/mkdocs.yml
</code></pre>
<p>From this point on, the changes should immediately update every time the changes are saved.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For completeness sake, below is the command to build the static website, but it isn't needed in our use case.</p>
<pre><code>mkdocs build -f public/mkdocs.yml
mkdocs build -f private/mkdocs.yml
</code></pre>
</div>
<h3 id="how-to-resize-kvm-virtual-disk-size">How to resize KVM virtual disk size</h3>
<p>Resize the virtual disk size.</p>
<pre><code>sudo qemu-img resize /data/kvm/&lt;vm_name&gt; +10G
</code></pre>
<p>Check if the virtual disk has been resized.</p>
<pre><code>sudo qemu-img info /data/kvm/&lt;vm_name&gt;
</code></pre>
<p>This gives the path to the *.qcow2 file which is used as an argument to the resizing command.</p>
<pre><code>sudo virsh domblklist &lt;vm_name&gt;
</code></pre>
<p>Make sure that there are no snapshots otherwise resizing won't work.</p>
<pre><code>sudo virsh snapshot-list &lt;vm_name&gt;
</code></pre>
<p>Remove them using this command.</p>
<pre><code>sudo virsh snapshot-delete &lt;vm_name&gt; &lt;snapshot_name&gt;
</code></pre>
<p>Instructions are based on this <a href="https://linuxiac.com/how-to-resize-extend-kvm-virtual-disk-size/">guide</a>.</p>
<h3 id="how-to-set-default-text-editor">How to set default text editor</h3>
<p>Either just in a TTY, shell, or <code>.bashrc</code> [<a href="https://bbs.archlinux.org/viewtopic.php?id=47921">1</a>].</p>
<pre><code>export EDITOR=nano
</code></pre>
<h3 id="how-to-enable-tpm-on-kvm">How to enable TPM on KVM</h3>
<pre><code>sudo pacman -S swtpm
</code></pre>
<p>Then in <code>virt-manager</code> [<a href="https://computingforgeeks.com/enable-tpm-on-kvm-and-install-windows/">1</a>, <a href="https://insights.ditatompel.com/en/tutorials/run-windows-11-tpm-and-secure-boot-on-kvm/">2</a>]:</p>
<ol>
<li>Allow customization before installation by checking the box. You can also configure the VM network. For this guide I have used a bridged network.</li>
<li>On the overview windows, select add hardware.</li>
<li>Add TPM 2.0 and make the settings as shown. Then click Finish to apply the changes.<ol>
<li>Model: TIS</li>
<li>Backend: Emulated device</li>
<li>Version: 2.0</li>
</ol>
</li>
<li>Just before you begin the installation, remember to change Firmware. Apply the changes and begin the installation.<ol>
<li>Firmware: *_secboot.fd</li>
</ol>
</li>
</ol>
<h3 id="how-to-customise-xorg-on-arch-linux">How to customise xorg on Arch Linux</h3>
<p>Copy <code>.xinitrc</code> from default location [<a href="https://wiki.archlinux.org/title/Xinit">1</a>].</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span>cp<span class="w"> </span>/etc/X11/xinit/xinitrc<span class="w"> </span>~/.xinitrc
</code></pre></div>
<h3 id="how-to-install-st-dmenu-and-dwm-on-arch-linux">How to install st, dmenu, and dwm on Arch Linux</h3>
<p>Execute the following instructions [<a href="https://davidtsadler.com/posts/arch/2020-08-17/installing-st-dmenu-dwm-in-arch-linux/">1</a>].</p>
<pre><code>sudo pacman -S base-devel git libx11 libxft xorg-server xorg-xinit terminus-font
</code></pre>
<p>There are many shortcuts to remember [<a href="https://ratfactor.com/dwm">1</a>]. Also, to avoid <code>sudo</code> in <code>sudo make install</code>, I modified <code>config.mk</code> to change the prefix to <code>~/.local</code> [<a href="https://unix.stackexchange.com/questions/20953/difference-between-make-install-and-sudo-make-install">1</a>].</p>
<h3 id="how-to-add-gaps-to-dwm-on-arch-linux">How to add gaps to dwm on Arch Linux</h3>
<p>Download a patch that contains changes to the dwm source code [<a href="https://dwm.suckless.org/patches/gaps/">1</a>, <a href="https://www.reddit.com/r/suckless/comments/x1uk8k/how_to_know_which_version/">2</a>, <a href="https://dwm.suckless.org/patches/vanitygaps/">3</a>]. Use the <code>patch</code> command to change the source code [<a href="https://bbs.archlinux.org/viewtopic.php?id=131480">1</a>]. Also, <code>*.rej</code> contains changes that were rejected due to conflicts. These changes must be handled manually.</p>
<pre><code>patch &lt; dwm-cfacts-vanitygaps-6.4_combo.diff
</code></pre>
<h3 id="how-to-install-surf-on-arch-linux">How to install surf on Arch Linux</h3>
<p>Install dependencies [<a href="https://bbs.archlinux.org/viewtopic.php?id=268489">1</a>, <a href="https://bbs.archlinux.org/viewtopic.php?id=271511">2</a>].</p>
<pre><code>sudo pacman -S gcr webkit2gtk-4.1
git clone git://git.suckless.org/surf ~/.local/src/surf
</code></pre>
<p>Use the following to open a webpage.</p>
<pre><code>surf http://your-url
</code></pre>
<p>During operation, use <code>ctrl-g</code> to enter a new URL [<a href="https://surf.suckless.org/">1</a>]. An interesting documentation could be found here at [<a href="https://troubleshooters.com/linux/surf.htm">1</a>] as well.</p>
<h3 id="how-to-customise-st-dmenu-dwm-on-arch-linux">How to customise st, dmenu, dwm on Arch Linux</h3>
<p>The <em>suckless</em> software is customised primarily through <em>patches</em> [<a href="https://dwm.suckless.org/patches/">1</a>, <a href="https://tools.suckless.org/dmenu/patches/">2</a>, <a href="https://st.suckless.org/patches/">3</a>]. These patches in turn modify the source code that is written in C. To apply a patch issue a command such as like: <code>patch &lt; path/to/patch.diff</code>. I would recommend to issue the commands from the root folder of a project.</p>
<p>Applied the patches for <code>dwm</code> in order of appearance: <a href="https://dwm.suckless.org/patches/bar_height/">bar height</a>, <a href="https://dwm.suckless.org/patches/barpadding/">barpadding</a>, <a href="https://dwm.suckless.org/patches/vanitygaps/">vanitygapps</a>.</p>
<p>The <code>config.h</code> file is a generated file and, in my case, was own by <code>root</code>. Therefore, it was easier to modify <code>config.def.h</code> file and remove <code>config.h</code> when rebuilding.</p>
<p>To set custom fonts, e.g. Terminus, Tamzen, JetBrains Mono, Hack, and Source Code Pro, change the arguments from <code>"monospace:size=10"</code> to <code>"xos4 Terminus:pixelsize=14"</code> in <code>config.def.h</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">borderpx</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">  </span><span class="cm">/* border pixel of windows */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">gappiv</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="cm">/* vert inner gap between windows */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">user_bh</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="cm">/* 2 is the default spacing around the bar&#39;s font */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">vertpad</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="cm">/* vertical padding of bar */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sidepad</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="cm">/* horizontal padding of bar */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">fonts</span><span class="p">[]</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;xos4 Terminus:pixelsize=14&quot;</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">dmenufont</span><span class="p">[]</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;xos4 Terminus:pixelsize=14&quot;</span><span class="p">;</span>
</code></pre></div>
<p>The patches for <code>dmenu</code>: <a href="https://tools.suckless.org/dmenu/patches/bar_height/">bar height</a>, <a href="https://tools.suckless.org/dmenu/patches/border/">border</a>, <a href="https://tools.suckless.org/dmenu/patches/case-insensitive/">case-insensitive</a>, <a href="https://tools.suckless.org/dmenu/patches/center/">center</a>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">user_bh</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="cm">/* add an defined amount of pixels to the bar height */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">fonts</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;xos4 Terminus:pixelsize=14&quot;</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="cm">/* -l option; if nonzero, dmenu uses vertical list with given number of lines */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lines</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="cm">/* Size of the window border */</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">border_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</code></pre></div>
<p>To enable bluetooth, installed <code>bluez</code>, and <code>bluez-utils</code>. The utilities package should contain <code>bluetoothctl</code> command [<a href="https://wiki.archlinux.org/title/Bluetooth">1</a>]. Enable and start the service.</p>
<pre><code>clear ; sudo systemctl status bluetooth
clear ; sudo systemctl enable bluetooth
clear ; sudo systemctl start bluetooth
clear ; sudo systemctl status bluetooth
</code></pre>
<p>As in [<a href="https://forum.manjaro.org/t/bluetoothctl-missing-in-my-installation/88318">1</a>, <a href="https://wiki.archlinux.org/title/Bluetooth">2</a>], to find what package is required to install a command run the following.</p>
<pre><code>clear ; sudo pacman -Fy bluetoothctl
</code></pre>
<p>To connect a device via <code>bluetoothctl</code>.</p>
<pre><code>bluetoothctl
power on
agent on
scan on
pair &lt;MAC&gt;
connect &lt;MAC&gt;
trust &lt;MAC&gt;
</code></pre>
<p>The most up-to-date approach to manage audio seems to be <code>pipewire</code> but it comes with its own quirks like <code>rtkit</code> warnings [<a href="https://github.com/NixOS/nixpkgs/issues/382076">1</a>].</p>
<p>Things I need in status bar:</p>
<ol>
<li>time &amp; date</li>
<li>volume level</li>
<li>wifi status</li>
<li>bluetooth status</li>
<li></li>
</ol>
<p>A script that achieves this is available at <code>project/dotfiles/.local/bin/status</code>. I usually copy it over to <code>~/.local/bin/status</code>. An example is displayed below.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">#!/bin/bash</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span>true<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="c1"># Volume</span>
<span class="w">        </span><span class="nv">VOL</span><span class="o">=</span><span class="k">$(</span>wpctl<span class="w"> </span>get-volume<span class="w"> </span>@DEFAULT_AUDIO_SINK@<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{printf(&quot;%d&quot;, $2 * 100)}&#39;</span><span class="k">)</span>

<span class="w">        </span><span class="c1"># Time</span>
<span class="w">        </span><span class="nv">TIME</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span><span class="s1">&#39;+%Y/%m/%d %H:%M:%S&#39;</span><span class="k">)</span>

<span class="w">        </span><span class="c1"># Wi-Fi</span>
<span class="w">        </span><span class="nv">WIFI</span><span class="o">=</span><span class="k">$(</span>nmcli<span class="w"> </span>-t<span class="w"> </span>-f<span class="w"> </span>active,ssid<span class="w"> </span>dev<span class="w"> </span>wifi<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;^yes&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d:<span class="w"> </span>-f2<span class="k">)</span>
<span class="w">        </span><span class="nv">SIGNAL</span><span class="o">=</span><span class="k">$(</span>nmcli<span class="w"> </span>-t<span class="w"> </span>-f<span class="w"> </span>active,ssid,signal<span class="w"> </span>dev<span class="w"> </span>wifi<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;^yes&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d:<span class="w"> </span>-f3<span class="k">)</span>

<span class="w">        </span><span class="c1"># Bluetooth</span>
<span class="w">        </span><span class="nv">BT_INFO</span><span class="o">=</span><span class="k">$(</span>bluetoothctl<span class="w"> </span>info<span class="k">)</span>
<span class="w">        </span><span class="nv">BT_CONNECTED</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_INFO</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Connected:&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_CONNECTED</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nv">BT_NAME</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_INFO</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Name:&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span>-f2-<span class="k">)</span>
<span class="w">            </span><span class="nv">BT_RAW_RSSI</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_INFO</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;RSSI:&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
<span class="w">        </span><span class="nv">BT_DEC_RSSI</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%d&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_RAW_RSSI</span><span class="s2">&quot;</span><span class="k">)</span>

<span class="w">        </span><span class="c1"># Signal quality based on dBm.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_DEC_RSSI</span><span class="s2">&quot;</span><span class="w"> </span>-ge<span class="w"> </span>-60<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="nv">BT_QUALITY</span><span class="o">=</span><span class="s2">&quot;Excellent&quot;</span>
<span class="w">            </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_DEC_RSSI</span><span class="s2">&quot;</span><span class="w"> </span>-ge<span class="w"> </span>-70<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="nv">BT_QUALITY</span><span class="o">=</span><span class="s2">&quot;Good&quot;</span>
<span class="w">            </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$BT_DEC_RSSI</span><span class="s2">&quot;</span><span class="w"> </span>-ge<span class="w"> </span>-80<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">                </span><span class="nv">BT_QUALITY</span><span class="o">=</span><span class="s2">&quot;Fair&quot;</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="nv">BT_QUALITY</span><span class="o">=</span><span class="s2">&quot;Poor&quot;</span>
<span class="w">            </span><span class="k">fi</span>


<span class="w">            </span><span class="nv">BT_STATUS</span><span class="o">=</span><span class="s2">&quot;Ôäì </span><span class="si">${</span><span class="nv">BT_NAME</span><span class="si">}</span><span class="s2"> (</span><span class="si">${</span><span class="nv">BT_DEC_RSSI</span><span class="si">}</span><span class="s2"> dBm, </span><span class="si">${</span><span class="nv">BT_QUALITY</span><span class="si">}</span><span class="s2">)&quot;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="nv">BT_STATUS</span><span class="o">=</span><span class="s2">&quot;Ôäì Disconnected&quot;</span>
<span class="w">        </span><span class="k">fi</span>

<span class="w">        </span><span class="c1"># Set status bar</span>
<span class="w">        </span>xsetroot<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;ÔÄ® </span><span class="si">${</span><span class="nv">VOL</span><span class="si">}</span><span class="s2">% | Ôá´ </span><span class="si">${</span><span class="nv">WIFI</span><span class="k">:-</span><span class="nv">Disconnected</span><span class="si">}</span><span class="s2"> (</span><span class="si">${</span><span class="nv">SIGNAL</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span><span class="s2">%) | </span><span class="si">${</span><span class="nv">BT_STATUS</span><span class="si">}</span><span class="s2"> | </span><span class="si">${</span><span class="nv">TIME</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">        </span>sleep<span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:li.vlad.viktor@gmail.com" target="_blank" rel="noopener" title="Email Me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>